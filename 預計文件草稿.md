

# 🧬 6 大文件層 v2.0 (Google Style)

### 📏 專案分級 (T-shirt Sizing)

為了避免「殺雞焉用牛刀」，請根據專案規模決定文件完整度：

* **S (小型優化)**：僅需 **A + B**。
* **M (中型功能)**：**A + B + C (簡化版)**，D/E 可由程式碼自動生成。
* **L (大型系統/重構)**：**全套 A - F**，且需嚴格審查 (Review)。

---

### 📚 文件架構總覽

| 文件 | 核心角色 | Google PM 觀點 (升級重點) | 形式建議 |
| --- | --- | --- | --- |
| **A. Product Charter** | 業主 / PM | 定義「價值與急迫性」 (Why Now?) | 1-Pager (Doc) |
| **B. System PRD** | PM / 架構 | 定義「功能與數據埋點」 (Telemetry) | Doc + Figma |
| **C. Arch Spec** | 架構 / 後端 | 定義「結構與決策軌跡」 (ADR) | Doc + Diagram |
| **D. API Contract** | 後端 / 前端 | 定義「自動化契約」 (Code First) | **Swagger / Proto** |
| **E. Data Spec** | DB / ML | 定義「資料流與遷移」 (Migration) | DBT / Doc |
| **F. Ops & SLA** | 維運 / 資安 | 定義「存活與救災手冊」 (Runbook) | Wiki / PagerDuty |

---

## A. Product Charter（產品憲章）

📌 **戰略層**：不只看做什麼，更看「為什麼現在做」。

| 區塊 | 內容與用途 | **💡 改進亮點** |
| --- | --- | --- |
| **Problem Statement** | 一句話痛點 | 需包含「用戶是誰」+「痛在哪裡」。 |
| **Why Now?** | **急迫性** | **(新增)** 為什麼是現在做？不做會死嗎？延後一季做的代價？ |
| **Success Metrics** | 成功定義 | 具體的北極星指標 (North Star Metric)。 |
| **Scope In / Out** | 產品邊界 | 明確寫出「第一版**不做**什麼」。 |
| **Stakeholders** | 利害關係人 | 誰有「否決權」 (Veto Power)。 |
| **Risks & Assumptions** | 風險假設 | 市場風險或技術不確定性。 |

---

## B. System PRD（系統需求書）

📌 **需求層**：功能與「數據」的出生地。

| 區塊 | 內容與用途 | **💡 改進亮點** |
| --- | --- | --- |
| **User Stories** | 用戶故事 | As a [Role], I want to [Action], so that [Benefit]. |
| **UX / UI Flow** | 畫面流程 | 直接嵌入 Figma 連結，文字只補充邏輯。 |
| **Functional Req** | 功能需求 | 詳細的邏輯描述 (Happy Path / Edge Case)。 |
| **Telemetry Plan** | **埋點計畫** | **(新增)** 上線後要看什麼 Dashboard？定義 Event Name 與 Trigger 時機。 |
| **External Dependency** | **外部依賴** | **(新增)** 依賴哪個 Team 的 API？對方承諾的交期是？ |
| **Acceptance Criteria** | 驗收標準 | QA 測試的依據 (Gherkin 語法: Given/When/Then)。 |

---

## C. Architecture Spec（架構白皮書）

📌 **設計層**：不僅有架構圖，更要有「決策歷史」。

| 區塊 | 內容與用途 | **💡 改進亮點** |
| --- | --- | --- |
| **System Diagram** | 系統架構圖 | C4 Model (Context, Container, Component)。 |
| **ADR Log** | **決策日誌** | **(新增)** Architecture Decision Records。紀錄 Trade-off (為何選 A 棄 B)。 |
| **Buy vs Build** | **自建評估** | **(新增)** 為什麼要自己寫而不買 SaaS？成本效益分析。 |
| **Tech Stack** | 技術選型 | 語言、框架、雲服務組件。 |
| **Cost Estimation** | **成本預估** | **(新增)** 預估每月雲端帳單 (FinOps)。 |
| **Sequence Flow** | 時序圖 | 複雜邏輯的交互流程。 |

---

## D. API Contract（服務法律書）

📌 **契約層**：拒絕手寫文件，強調「單一真理來源」。

| 區塊 | 內容與用途 | **💡 改進亮點** |
| --- | --- | --- |
| **Interface Def** | 接口定義 | **(強烈建議)** 使用 Swagger (OpenAPI) 或 Protobuf 自動生成。 |
| **Mock Server** | **模擬服務** | **(新增)** 前端開發用的 Mock URL (讓前後端並行開發)。 |
| **Error Handling** | 錯誤處理 | 定義標準 HTTP Status Code 與 Error Message 格式。 |
| **Rate Limiting** | 限流規則 | 每個 Client 的 Quota 限制。 |
| **Versioning** | 版本策略 | Breaking Change 的處理方式 (v1 -> v2)。 |

---

## E. Data Spec（資料宇宙憲章）

📌 **數據層**：定義資料的「生、老、病、死」。

| 區塊 | 內容與用途 | **💡 改進亮點** |
| --- | --- | --- |
| **ERD / Schema** | 資料結構 | 資料表關聯圖。 |
| **Data Dictionary** | 欄位字典 | 欄位定義、型別、Enum 值域。 |
| **Data Lineage** | **血緣關係** | **(新增)** 資料從哪裡 ETL 過來的？上下游是誰？ |
| **Migration Plan** | **遷移計畫** | **(新增)** 舊資料怎麼搬？如何驗證新舊資料一致性？ |
| **Retention Policy** | 保存期限 | 資料多久刪除？冷熱資料分層。 |
| **Privacy / PII** | 隱私分級 | 哪些欄位需要加密或脫敏 (GDPR/個資法)。 |

---

## F. Ops & SLA Spec（生命維運書）

📌 **維運層**：系統上線後的「生存指南」。

| 區塊 | 內容與用途 | **💡 改進亮點** |
| --- | --- | --- |
| **SLA / SLO** | 服務水準 | 承諾的 Availability (99.9%?) 與 Latency。 |
| **Monitoring** | 監控面板 | 關鍵 Metrics (CPU, Memory, QPS, Error Rate)。 |
| **Runbook** | **救災手冊** | **(新增)** Alert 響了怎麼辦？Step-by-step 的標準處置流程 (SOP)。 |
| **Capacity Plan** | **容量規劃** | **(新增)** 預估支撐多少併發 (CCU)？何時擴容 (Auto-scaling 規則)？ |
| **Disaster Recovery** | 災難復原 | DB 備份策略、RTO (復原時間) / RPO (資料落差)。 |

